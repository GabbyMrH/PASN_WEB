(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed1a9534"],{"0144":function(e,t,o){},1:function(e,t){},"192b":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container"},[o("el-form",{ref:"form",attrs:{rules:e.formRules,inline:!0,model:e.outBoundForm,"label-width":"120px"}},[o("el-card",{staticClass:"box-card"},[o("div",{staticStyle:{display:"flex","box-shadow":"0px 2px 1px 2px #ebeef5","margin-bottom":"20px"}},[o("div",{staticStyle:{width:"50%"}},[o("el-form-item",{attrs:{label:"客户参考号",prop:"ref_no"}},[o("el-input",{attrs:{disabled:e.formDisable},model:{value:e.outBoundForm.ref_no,callback:function(t){e.$set(e.outBoundForm,"ref_no",t)},expression:"outBoundForm.ref_no"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"客户编码",prop:"customer_id"}},[o("el-input",{attrs:{disabled:e.formDisable},model:{value:e.outBoundForm.customer_id,callback:function(t){e.$set(e.outBoundForm,"customer_id",t)},expression:"outBoundForm.customer_id"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"订单日期",prop:"issue_date"}},[o("el-date-picker",{staticStyle:{width:"85%"},attrs:{type:"datetime",placeholder:"选择日期时间",disabled:e.formDisable,format:"yyyy-MM-dd HH:mm:ss"},model:{value:e.outBoundForm.issue_date,callback:function(t){e.$set(e.outBoundForm,"issue_date",t)},expression:"outBoundForm.issue_date"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"仓库编码",prop:"warehouse_code","label-width":"90px"}},[o("el-select",{staticStyle:{width:"90%"},attrs:{loading:e.selectLoading,placeholder:"请选择",disabled:e.formDisable},on:{focus:e.getWarehouseList},model:{value:e.outBoundForm.warehouse_code,callback:function(t){e.$set(e.outBoundForm,"warehouse_code",t)},expression:"outBoundForm.warehouse_code"}},e._l(e.warehouseList,(function(e,t){return o("el-option",{key:t,attrs:{label:e.warehouse_code,value:e.warehouse_code}})})),1)],1)],1),e._v(" "),o("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),o("div",{staticStyle:{width:"50%"}},[o("el-form-item",{attrs:{label:"装柜方式",prop:"container_loadtype"}},[o("el-select",{attrs:{placeholder:"请选择",disabled:e.formDisable},model:{value:e.outBoundForm.container_loadtype,callback:function(t){e.$set(e.outBoundForm,"container_loadtype",t)},expression:"outBoundForm.container_loadtype"}},e._l(e.containerLoadtypeList,(function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"派车方式",prop:"truckorder_type"}},[o("el-select",{attrs:{placeholder:"请选择",disabled:e.formDisable},model:{value:e.outBoundForm.truckorder_type,callback:function(t){e.$set(e.outBoundForm,"truckorder_type",t)},expression:"outBoundForm.truckorder_type"}},e._l(e.truckorderTypeList,(function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"集装箱类型",prop:"container_type"}},[o("el-select",{attrs:{placeholder:"请选择",disabled:e.formDisable},model:{value:e.outBoundForm.container_type,callback:function(t){e.$set(e.outBoundForm,"container_type",t)},expression:"outBoundForm.container_type"}},e._l(e.containerTypeList,(function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"集装箱号",prop:"container_no"}},[o("el-input",{staticStyle:{width:"12rem"},attrs:{placeholder:"集装箱号",disabled:e.formDisable},model:{value:e.outBoundForm.container_no,callback:function(t){e.$set(e.outBoundForm,"container_no",t)},expression:"outBoundForm.container_no"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"车型",prop:"truck_type"}},[o("el-input",{staticStyle:{width:"12rem"},attrs:{placeholder:"车型",disabled:e.formDisable},model:{value:e.outBoundForm.truck_type,callback:function(t){e.$set(e.outBoundForm,"truck_type",t)},expression:"outBoundForm.truck_type"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"车牌号",prop:"truck_no"}},[o("el-input",{staticStyle:{width:"12rem"},attrs:{placeholder:"车牌号",disabled:e.formDisable},model:{value:e.outBoundForm.truck_no,callback:function(t){e.$set(e.outBoundForm,"truck_no",t)},expression:"outBoundForm.truck_no"}})],1)],1)],1),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-form-item",{attrs:{label:"总数量",prop:"order_qty"}},[o("el-input",{attrs:{disabled:e.formDisable},model:{value:e.outBoundForm.order_qty,callback:function(t){e.$set(e.outBoundForm,"order_qty",t)},expression:"outBoundForm.order_qty"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"总体积",prop:"order_cbm"}},[o("el-input",{attrs:{disabled:e.formDisable},model:{value:e.outBoundForm.order_cbm,callback:function(t){e.$set(e.outBoundForm,"order_cbm",t)},expression:"outBoundForm.order_cbm"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"总重量",prop:"order_gw"}},[o("el-input",{attrs:{disabled:e.formDisable},model:{value:e.outBoundForm.order_gw,callback:function(t){e.$set(e.outBoundForm,"order_gw",t)},expression:"outBoundForm.order_gw"}})],1)],1)],1),e._v(" "),o("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"20px"}},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},["create"===e.status?o("el-button",{attrs:{icon:"el-icon-plus",size:"small",plain:""},on:{click:function(t){return e.handleCreate("form")}}},[e._v("增加")]):e._e(),e._v(" "),"create"===e.status?o("custom",{attrs:{"on-success":e.handleUploadSuccess}}):e._e(),e._v(" "),"create"===e.status?o("el-link",{staticStyle:{"margin-left":"10px"},attrs:{href:e.excelTemplateUrl,type:"warning",target:"_blank"}},[e._v("Excel模板下载")]):e._e()],1),e._v(" "),o("div",[o("el-table",{ref:"inBoundTable",staticStyle:{width:"100%"},attrs:{data:e.outBoundForm.details,stripe:!0,border:!0,"header-cell-style":{background:"#ebeef5"},"highlight-current-row":"","row-style":{cursor:"pointer"}},on:{"row-click":e.selectRowFunc}},[o("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{prop:"line_num",label:"行号",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"ref_no",label:"客户参考号",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"po_no",label:"PO#",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"qty_case",label:"数量/箱数",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"sku_ename",label:"商品名称"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"fba_warehouse",label:"FBA仓库代码"}}),e._v(" "),"update"===e.status?o("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleEdit(a)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.handleDelete(a)}}},[e._v("删除")])]}}],null,!1,116640679)}):e._e()],1)],1)])],1),e._v(" "),o("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"35%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{ref:"dialogForm",attrs:{inline:!0,model:e.dialogForm,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"行号"}},[o("el-input",{model:{value:e.dialogForm.line_num,callback:function(t){e.$set(e.dialogForm,"line_num",t)},expression:"dialogForm.line_num"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"客户参考号"}},[o("el-input",{attrs:{disabled:""},model:{value:e.outBoundForm.ref_no,callback:function(t){e.$set(e.outBoundForm,"ref_no",t)},expression:"outBoundForm.ref_no"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"PO#"}},[o("el-input",{model:{value:e.dialogForm.po_no,callback:function(t){e.$set(e.dialogForm,"po_no",t)},expression:"dialogForm.po_no"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"数量/箱数"}},[o("el-input",{model:{value:e.dialogForm.qty_case,callback:function(t){e.$set(e.dialogForm,"qty_case",t)},expression:"dialogForm.qty_case"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商品名称"}},[o("el-input",{model:{value:e.dialogForm.sku_ename,callback:function(t){e.$set(e.dialogForm,"sku_ename",t)},expression:"dialogForm.sku_ename"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"FBA仓库代码"}},[o("el-input",{model:{value:e.dialogForm.fba_warehouse,callback:function(t){e.$set(e.dialogForm,"fba_warehouse",t)},expression:"dialogForm.fba_warehouse "}})],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.status?e.create():e.update()}}},[e._v("确 定")])],1)],1)],1)},r=[],l=(o("a481"),o("f09a")),n=o("2934"),i=o("dfb8"),s={name:"OutBoundCreateOrUpdate",components:{Custom:i["a"]},data:function(){return{loading:!1,selectLoading:!1,formDisable:!1,inBoundParams:null,excelTemplateUrl:"",status:"",outBoundForm:{ref_no:"",customer_id:"",issue_date:new Date,warehouse_code:"",details:null,detail_total:"",container_loadtype:"",truckorder_type:"",container_type:"",container_no:"",truck_type:"",truck_no:"",order_qty:"",order_cbm:"",order_gw:""},dialogForm:{line_num:"",ref_no:"",po_no:"",qty_case:"",sku_ename:"",fba_warehouse:""},warehouseList:null,containerLoadtypeList:[{label:"FCL",value:"FCL"},{label:"LCL",value:"LCL"}],truckorderTypeList:[{label:"自派",value:"CLIENT"},{label:"委托",value:"ORDER"}],containerTypeList:[{label:"20",value:"20"},{label:"40",value:"40"},{label:"45",value:"45"}],formRules:{ref_no:[{required:!0,message:"客户参考号必填",trigger:"blur"}],customer_id:[{required:!0,message:"客户编码必填",trigger:"blur"}],warehouse_code:[{required:!0,message:"仓库编码必填",trigger:"blur"}]},dialogVisible:!1}},created:function(){this.status=this.$route.params.status,this.inBoundParams=this.$route.params,this.checkInBoundStatus(),this.getExcelTemplate()},methods:{checkInBoundStatus:function(){"update"===this.status?(this.getDetailList(),this.formDisable=!0):this.outBoundForm={}},getExcelTemplate:function(){var e="http://120.78.142.77:8081/v1",t=e.replace("/v1","");this.excelTemplateUrl=t+"/assets/excel/outbound-detail-list.xlsx"},getWarehouseList:function(){var e=this;this.selectLoading=!0,Object(n["a"])().then((function(t){e.warehouseList=t.data,e.selectLoading=!1}))},getDetailList:function(){var e=this;this.loading=!0,Object(l["d"])({issue_id:this.inBoundParams.issue_id}).then((function(t){null!==t.data&&(e.outBoundForm=Object.assign(e.outBoundForm,t.data)),e.loading=!1}))},selectRowFunc:function(e){this.$refs.inBoundTable.toggleRowSelection(e)},handleCreate:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.dialogVisible=!0}))},create:function(e){var t=this;if("create"===this.status){var o=[];o.push(this.dialogForm),this.outBoundForm.details=o,Object(l["e"])(this.outBoundForm).then((function(e){2001===e.code?(t.$message({message:"写入成功",type:"success"}),t.dialogVisible=!1):t.$message.error("写入失败")}))}},handleUploadSuccess:function(e){var t=this,o=e.results;e.header;this.$refs.form.validate((function(e){if(!e)return!1;t.outBoundForm.details=o,Object(l["e"])(t.outBoundForm).then((function(e){2001===e.code?(t.$message({message:"写入成功",type:"success"}),t.dialogVisible=!1):t.$message.error("写入失败")}))}))},handleEdit:function(e){this.dialogVisible=!0,this.dialogForm=e},update:function(){var e=this,t={outboundid:"",details:null},o=[];o.push(this.dialogForm),t.outboundid=this.dialogForm.outboundid,t.details=o,Object(l["c"])(t).then((function(t){2001===t.code?(e.$message({message:"写入成功",type:"success"}),e.dialogVisible=!1):e.$message.error("写入失败")}))},handleDelete:function(e){var t=this;Object(l["b"])({outboundid:e.outboundid}).then((function(e){2001===e.code?(t.$message({message:"删除成功",type:"success"}),t.getDetailList()):t.$message.error("删除失败")}))}}},u=s,c=(o("5e15"),o("2877")),d=Object(c["a"])(u,a,r,!1,null,"185e306f",null);t["default"]=d.exports},2:function(e,t){},2934:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var a=o("b775");function r(){return Object(a["a"])({url:"warehouse",method:"get"})}},3:function(e,t){},"3a0c":function(e,t,o){},"5e15":function(e,t,o){"use strict";var a=o("0144"),r=o.n(a);r.a},"64b2":function(e,t,o){"use strict";var a=o("3a0c"),r=o.n(a);r.a},dfb8:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{display:"inline-block"}},[o("input",{ref:"excel-upload-input",staticClass:"excel-upload-input",attrs:{type:"file",accept:".xlsx, .xls"},on:{change:e.handleClick}}),e._v(" "),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{loading:e.loading,size:"mini",type:"primary",plain:"",icon:"el-icon-upload"},on:{click:e.handleUpload}},[e._v("导入")])],1)},r=[],l=(o("7f7f"),o("1146")),n=o.n(l),i={props:{beforeUpload:Function,onSuccess:Function},data:function(){return{loading:!1,excelData:{header:null,results:null}}},methods:{generateData:function(e){var t=e.header,o=e.results;this.excelData.header=t,this.excelData.results=o,this.onSuccess&&this.onSuccess(this.excelData)},handleUpload:function(){this.$refs["excel-upload-input"].click()},handleClick:function(e){var t=e.target.files,o=t[0];o&&this.upload(o)},upload:function(e){if(this.$refs["excel-upload-input"].value=null,this.beforeUpload){var t=this.beforeUpload(e);t&&this.readerData(e)}else this.readerData(e)},readerData:function(e){var t=this;return this.loading=!0,new Promise((function(o,a){var r=new FileReader;r.onload=function(e){var a=e.target.result,r=n.a.read(a,{type:"array"}),l=r.SheetNames[0],i=r.Sheets[l],s=t.getHeaderRow(i),u=n.a.utils.sheet_to_json(i);t.generateData({header:s,results:u}),t.loading=!1,o()},r.readAsArrayBuffer(e)}))},getHeaderRow:function(e){var t,o=[],a=n.a.utils.decode_range(e["!ref"]),r=a.s.r;for(t=a.s.c;t<=a.e.c;++t){var l=e[n.a.utils.encode_cell({c:t,r:r})],i="UNKNOWN "+t;l&&l.t&&(i=n.a.utils.format_cell(l)),o.push(i)}return o},isExcel:function(e){return/\.(xlsx|xls|csv)$/.test(e.name)}}},s=i,u=(o("64b2"),o("2877")),c=Object(u["a"])(s,a,r,!1,null,"d97b9872",null);t["a"]=c.exports},f09a:function(e,t,o){"use strict";o.d(t,"f",(function(){return r})),o.d(t,"d",(function(){return l})),o.d(t,"e",(function(){return n})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return u}));var a=o("b775");function r(e){return Object(a["a"])({url:"outbound",method:"get",params:e})}function l(e){return Object(a["a"])({url:"outbound/detail",method:"get",params:e})}function n(e){return Object(a["a"])({url:"outbound",method:"post",params:e})}function i(e){return Object(a["a"])({url:"outbound/detail",method:"put",params:e})}function s(e){return Object(a["a"])({url:"outbound",method:"delete",params:e})}function u(e){return Object(a["a"])({url:"outbound/detail",method:"delete",params:e})}}}]);